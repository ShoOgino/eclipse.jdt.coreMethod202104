	/** 
	 * Creates a new instance of Code Formatter using the given settings.
	 */
	public CodeFormatter(Map settings) {
		// initialize primary and secondary scanners
		scanner = new Scanner(true /*comment*/, true /*whitespace*/, false /*nls*/, ClassFileConstants.JDK1_3/*sourceLevel*/, null /*taskTags*/, null/*taskPriorities*/); // regular scanner for forming lines
		// to record positions of the beginning of lines.
		scanner.recordLineSeparator = true;

		// secondary scanner to split long lines formed by primary scanning
		splitScanner = new Scanner(true /*comment*/, true /*whitespace*/, false /*nls*/, ClassFileConstants.JDK1_3/*sourceLevel*/, null /*taskTags*/, null/*taskPriorities*/);

		this.options = new FormatterOptions(settings);
	}


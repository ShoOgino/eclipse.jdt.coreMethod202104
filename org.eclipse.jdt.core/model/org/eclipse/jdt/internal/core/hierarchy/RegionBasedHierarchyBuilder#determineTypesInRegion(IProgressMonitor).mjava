	/**
	 * Returns all of the types defined in the region of this type hierarchy.
	 */
	private ArrayList determineTypesInRegion(IProgressMonitor monitor) {

		try {
			ArrayList types = new ArrayList();
			IJavaElement[] roots =
				((RegionBasedTypeHierarchy) this.hierarchy).region.getElements();
			int length = roots.length;
			if (monitor != null) monitor.beginTask("", length); //$NON-NLS-1$
			for (int i = 0; i <length; i++) {
				try {
					IJavaElement root = roots[i];
					switch (root.getElementType()) {
						case IJavaElement.JAVA_PROJECT :
							injectAllTypesForJavaProject((IJavaProject) root, types);
							break;
						case IJavaElement.PACKAGE_FRAGMENT_ROOT :
							injectAllTypesForPackageFragmentRoot((IPackageFragmentRoot) root, types);
							break;
						case IJavaElement.PACKAGE_FRAGMENT :
							injectAllTypesForPackageFragment((IPackageFragment) root, types);
							break;
						case IJavaElement.CLASS_FILE :
							types.add(((IClassFile) root).getType());
							break;
						case IJavaElement.COMPILATION_UNIT :
							IType[] cuTypes = ((ICompilationUnit) root).getAllTypes();
							for (int j = 0; j < cuTypes.length; j++) {
								types.add(cuTypes[j]);
							}
							break;
						case IJavaElement.TYPE :
							types.add(root);
							break;
						default :
							break;
					}
				} catch (JavaModelException e) {
					// just continue
				}
				worked(monitor, 1);
			}
			return types;
		} finally {
			if (monitor != null) monitor.done();
		}
	}

